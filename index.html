<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Tareas y Documentos - 2026</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Sistema de Gesti√≥n - 2026</h1>
            <p class="subtitle">Tareas y Documentos de Ingenier√≠a</p>
        </header>

        <!-- Navigation Bar -->
        <nav class="navigation-bar">
            <button class="nav-btn" onclick="showModule('dashboard')">
                üìä Dashboard
            </button>
            <button class="nav-btn active" onclick="showModule('tasks-docs')">
                üìã Tareas y Documentos
            </button>
            <button class="nav-btn" onclick="showModule('amfe')">
                ‚ö†Ô∏è AMFE
            </button>
            <button class="nav-btn" onclick="showModule('control-plan')">
                üìà Plan de Control
            </button>
            <button class="nav-btn" onclick="showModule('flowchart')">
                üîÑ Flujograma
            </button>
            <button class="nav-btn" onclick="showModule('timesheets')">
                ‚è±Ô∏è Planillas de Tiempo
            </button>
        </nav>

        <!-- Dashboard Module -->
        <div id="module-dashboard" class="module-content">
            <div class="dashboard-container">
                <h2 class="dashboard-title">üìä Dashboard de Productividad</h2>
                
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #3b82f6, #2563eb);">
                            üìã
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Total de Tareas</div>
                            <div class="stat-value" id="stat-total-tasks">0</div>
                            <div class="stat-change positive" id="stat-tasks-change">+0 esta semana</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #10b981, #059669);">
                            ‚úì
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Completadas</div>
                            <div class="stat-value" id="stat-completed-tasks">0</div>
                            <div class="stat-change" id="stat-completion-rate">0% tasa completado</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                            ‚è±Ô∏è
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Pendientes</div>
                            <div class="stat-value" id="stat-pending-tasks">0</div>
                            <div class="stat-change" id="stat-pending-change">0 vencidas</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
                            üî•
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Alta Prioridad</div>
                            <div class="stat-value" id="stat-high-priority">0</div>
                            <div class="stat-change" id="stat-priority-change">Requieren atenci√≥n</div>
                        </div>
                    </div>
                </div>
                
                <!-- Charts Section -->
                <div class="charts-grid">
                    <div class="chart-card">
                        <h3 class="chart-title">Tareas por Estado</h3>
                        <div class="chart-container">
                            <canvas id="status-chart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <h3 class="chart-title">Tareas por Prioridad</h3>
                        <div class="chart-container">
                            <canvas id="priority-chart"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- Progress Section -->
                <div class="progress-section">
                    <h3 class="section-title">üìà Progreso Esta Semana</h3>
                    <div class="progress-cards">
                        <div class="progress-card">
                            <div class="progress-header">
                                <span>Lunes</span>
                                <span id="progress-mon">0</span>
                            </div>
                            <div class="progress-bar-wrapper">
                                <div class="progress-bar-fill" id="progress-mon-bar"></div>
                            </div>
                        </div>
                        <div class="progress-card">
                            <div class="progress-header">
                                <span>Martes</span>
                                <span id="progress-tue">0</span>
                            </div>
                            <div class="progress-bar-wrapper">
                                <div class="progress-bar-fill" id="progress-tue-bar"></div>
                            </div>
                        </div>
                        <div class="progress-card">
                            <div class="progress-header">
                                <span>Mi√©rcoles</span>
                                <span id="progress-wed">0</span>
                            </div>
                            <div class="progress-bar-wrapper">
                                <div class="progress-bar-fill" id="progress-wed-bar"></div>
                            </div>
                        </div>
                        <div class="progress-card">
                            <div class="progress-header">
                                <span>Jueves</span>
                                <span id="progress-thu">0</span>
                            </div>
                            <div class="progress-bar-wrapper">
                                <div class="progress-bar-fill" id="progress-thu-bar"></div>
                            </div>
                        </div>
                        <div class="progress-card">
                            <div class="progress-header">
                                <span>Viernes</span>
                                <span id="progress-fri">0</span>
                            </div>
                            <div class="progress-bar-wrapper">
                                <div class="progress-bar-fill" id="progress-fri-bar"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Team Performance -->
                <div class="team-section">
                    <h3 class="section-title">üë• Rendimiento por Persona</h3>
                    <div id="team-stats" class="team-stats">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>
                
                <!-- Recent Activity -->
                <div class="activity-section">
                    <h3 class="section-title">üïê Actividad Reciente</h3>
                    <div id="recent-activity" class="activity-list">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Tasks and Documents Module -->
        <div id="module-tasks-docs" class="module-content active">
            <div class="main-content">
            <!-- Task Management Section -->
            <section class="section" id="tasks-section">
                <div class="section-header">
                    <h2>üìã Gesti√≥n de Tareas</h2>
                    <div class="header-controls">
                        <div class="view-toggle">
                            <button class="view-btn active" onclick="switchTaskView('list')" data-view="list">
                                üìã Lista
                            </button>
                            <button class="view-btn" onclick="switchTaskView('kanban')" data-view="kanban">
                                üìä Kanban
                            </button>
                        </div>
                        <button class="btn btn-primary" onclick="showAddTaskForm()">+ Nueva Tarea</button>
                    </div>
                </div>

                <!-- Add Task Form -->
                <div id="add-task-form" class="form-container" style="display: none;">
                    <h3>Agregar Nueva Tarea</h3>
                    <form onsubmit="addTask(event)">
                        <div class="form-group">
                            <label for="task-title">T√≠tulo*</label>
                            <input type="text" id="task-title" required>
                        </div>
                        <div class="form-group">
                            <label for="task-description">Descripci√≥n</label>
                            <textarea id="task-description" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="task-priority">Prioridad</label>
                            <select id="task-priority">
                                <option value="baja">Baja</option>
                                <option value="media" selected>Media</option>
                                <option value="alta">Alta</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="task-due-date">Fecha de Vencimiento</label>
                            <input type="date" id="task-due-date">
                        </div>
                        <div class="form-group">
                            <label for="task-assignee">Asignado a</label>
                            <input type="text" id="task-assignee" placeholder="Nombre del responsable">
                        </div>
                        <div class="form-group">
                            <label for="task-tags">Etiquetas (separadas por coma)</label>
                            <input type="text" id="task-tags" placeholder="desarrollo, frontend, urgente">
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-success">Guardar</button>
                            <button type="button" class="btn btn-secondary" onclick="hideAddTaskForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <!-- Task Search and Filters -->
                <div class="search-filters">
                    <div class="search-box">
                        <input type="text" id="task-search" placeholder="üîç Buscar tareas..." oninput="searchTasks()">
                    </div>
                    <div class="filters">
                        <button class="filter-btn active" onclick="filterTasks('all')">Todas</button>
                        <button class="filter-btn" onclick="filterTasks('pending')">Pendientes</button>
                        <button class="filter-btn" onclick="filterTasks('completed')">Completadas</button>
                    </div>
                </div>

                <!-- Tasks List -->
                <!-- List View -->
                <div id="tasks-list" class="tasks-list">
                    <!-- Tasks will be rendered here -->
                </div>
                
                <!-- Kanban View -->
                <div id="kanban-board" class="kanban-board" style="display: none;">
                    <div class="kanban-column">
                        <div class="kanban-column-header">
                            <span class="kanban-column-title">üìã Por Hacer</span>
                            <span class="kanban-column-count" id="todo-count">0</span>
                        </div>
                        <div class="kanban-column-content" id="kanban-todo" data-status="todo">
                            <!-- Todo tasks will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="kanban-column">
                        <div class="kanban-column-header">
                            <span class="kanban-column-title">‚ö° En Curso</span>
                            <span class="kanban-column-count" id="progress-count">0</span>
                        </div>
                        <div class="kanban-column-content" id="kanban-progress" data-status="progress">
                            <!-- In progress tasks will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="kanban-column">
                        <div class="kanban-column-header">
                            <span class="kanban-column-title">üîç Revisi√≥n</span>
                            <span class="kanban-column-count" id="review-count">0</span>
                        </div>
                        <div class="kanban-column-content" id="kanban-review" data-status="review">
                            <!-- Review tasks will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="kanban-column">
                        <div class="kanban-column-header">
                            <span class="kanban-column-title">‚úÖ Completo</span>
                            <span class="kanban-column-count" id="done-count">0</span>
                        </div>
                        <div class="kanban-column-content" id="kanban-done" data-status="done">
                            <!-- Completed tasks will be rendered here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Documents Management Section -->
            <section class="section" id="documents-section">
                <div class="section-header">
                    <h2>üìö Documentos de Ingenier√≠a</h2>
                    <button class="btn btn-primary" onclick="showAddDocumentForm()">+ Nuevo Documento</button>
                </div>

                <!-- Add Document Form -->
                <div id="add-document-form" class="form-container" style="display: none;">
                    <h3>Agregar Nuevo Documento</h3>
                    <form onsubmit="addDocument(event)">
                        <div class="form-group">
                            <label for="doc-title">T√≠tulo*</label>
                            <input type="text" id="doc-title" required>
                        </div>
                        <div class="form-group">
                            <label for="doc-type">Tipo de Documento</label>
                            <select id="doc-type">
                                <option value="especificacion">Especificaci√≥n</option>
                                <option value="dise√±o">Dise√±o</option>
                                <option value="manual">Manual</option>
                                <option value="reporte">Reporte</option>
                                <option value="otro">Otro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="doc-description">Descripci√≥n</label>
                            <textarea id="doc-description" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="doc-url">URL o Enlace</label>
                            <input type="text" id="doc-url" placeholder="https://...">
                        </div>
                        <div class="form-group">
                            <label for="doc-version">Versi√≥n</label>
                            <input type="text" id="doc-version" placeholder="v1.0">
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-success">Guardar</button>
                            <button type="button" class="btn btn-secondary" onclick="hideAddDocumentForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <!-- Document Categories -->
                <div class="filters">
                    <button class="filter-btn active" onclick="filterDocuments('all')">Todos</button>
                    <button class="filter-btn" onclick="filterDocuments('especificacion')">Especificaciones</button>
                    <button class="filter-btn" onclick="filterDocuments('dise√±o')">Dise√±os</button>
                    <button class="filter-btn" onclick="filterDocuments('manual')">Manuales</button>
                    <button class="filter-btn" onclick="filterDocuments('reporte')">Reportes</button>
                </div>

                <!-- Documents List -->
                <div id="documents-list" class="documents-list">
                    <!-- Documents will be rendered here -->
                </div>
            </section>
            </div>
        </div>

        <!-- AMFE Module -->
        <div id="module-amfe" class="module-content">
            <div class="under-construction">
                <div class="construction-icon">üöß</div>
                <h2>M√≥dulo AMFE</h2>
                <p class="construction-subtitle">An√°lisis de Modo y Efecto de Fallas</p>
                <p>Este m√≥dulo est√° en construcci√≥n. Pr√≥ximamente podr√°s:</p>
                <ul class="features-list">
                    <li>‚úì Crear y gestionar an√°lisis AMFE</li>
                    <li>‚úì Identificar modos de falla potenciales</li>
                    <li>‚úì Evaluar severidad, ocurrencia y detecci√≥n</li>
                    <li>‚úì Calcular NPR (N√∫mero de Prioridad de Riesgo)</li>
                    <li>‚úì Generar reportes y recomendaciones</li>
                </ul>
            </div>
        </div>

        <!-- Control Plan Module -->
        <div id="module-control-plan" class="module-content">
            <div class="under-construction">
                <div class="construction-icon">üöß</div>
                <h2>Plan de Control</h2>
                <p class="construction-subtitle">Gesti√≥n de Controles de Calidad</p>
                <p>Este m√≥dulo est√° en construcci√≥n. Pr√≥ximamente podr√°s:</p>
                <ul class="features-list">
                    <li>‚úì Definir planes de control de proceso</li>
                    <li>‚úì Establecer caracter√≠sticas cr√≠ticas</li>
                    <li>‚úì Especificar m√©todos de medici√≥n</li>
                    <li>‚úì Asignar frecuencias de control</li>
                    <li>‚úì Documentar planes de reacci√≥n</li>
                </ul>
            </div>
        </div>

        <!-- Flowchart Module -->
        <div id="module-flowchart" class="module-content">
            <div class="under-construction">
                <div class="construction-icon">üöß</div>
                <h2>Flujograma</h2>
                <p class="construction-subtitle">Diagramas de Flujo de Procesos</p>
                <p>Este m√≥dulo est√° en construcci√≥n. Pr√≥ximamente podr√°s:</p>
                <ul class="features-list">
                    <li>‚úì Crear diagramas de flujo interactivos</li>
                    <li>‚úì Definir procesos y subprocesos</li>
                    <li>‚úì Mapear flujos de trabajo</li>
                    <li>‚úì Identificar puntos de control</li>
                    <li>‚úì Exportar diagramas en m√∫ltiples formatos</li>
                </ul>
            </div>
        </div>

        <!-- Time Sheets Module -->
        <div id="module-timesheets" class="module-content">
            <div class="timesheets-container">
                <div class="section-header">
                    <h2>‚è±Ô∏è Planillas de Tiempo - OEE</h2>
                    <button class="btn btn-primary" onclick="showAddTimesheetForm()">+ Nueva Planilla</button>
                </div>

                <!-- Add Timesheet Form -->
                <div id="add-timesheet-form" class="form-container" style="display: none;">
                    <h3>Nueva Planilla de Tiempo</h3>
                    <form onsubmit="addTimesheet(event)">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="ts-date">Fecha*</label>
                                <input type="date" id="ts-date" required>
                            </div>
                            <div class="form-group">
                                <label for="ts-line">L√≠nea/M√°quina*</label>
                                <input type="text" id="ts-line" required placeholder="Ej: L√≠nea A, Torno 1">
                            </div>
                            <div class="form-group">
                                <label for="ts-product">Producto/Modelo*</label>
                                <input type="text" id="ts-product" required placeholder="Ej: Modelo X-100">
                            </div>
                            <div class="form-group">
                                <label for="ts-supervisor">Supervisor*</label>
                                <input type="text" id="ts-supervisor" required>
                            </div>
                        </div>

                        <h4 style="margin-top: 20px; color: var(--text-primary);">‚è∞ Configuraci√≥n de Turnos</h4>
                        <div class="shifts-container">
                            <!-- Shift 1 -->
                            <div class="shift-card">
                                <h5>üåÖ Turno 1</h5>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="ts-shift1-start">Hora Inicio</label>
                                        <input type="time" id="ts-shift1-start" value="06:00">
                                    </div>
                                    <div class="form-group">
                                        <label for="ts-shift1-end">Hora Fin</label>
                                        <input type="time" id="ts-shift1-end" value="14:00">
                                    </div>
                                    <div class="form-group">
                                        <label for="ts-shift1-break">Descanso (min)</label>
                                        <input type="number" id="ts-shift1-break" value="30" min="0">
                                    </div>
                                </div>
                            </div>

                            <!-- Shift 2 -->
                            <div class="shift-card">
                                <h5>üåû Turno 2</h5>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="ts-shift2-start">Hora Inicio</label>
                                        <input type="time" id="ts-shift2-start" value="14:00">
                                    </div>
                                    <div class="form-group">
                                        <label for="ts-shift2-end">Hora Fin</label>
                                        <input type="time" id="ts-shift2-end" value="22:00">
                                    </div>
                                    <div class="form-group">
                                        <label for="ts-shift2-break">Descanso (min)</label>
                                        <input type="number" id="ts-shift2-break" value="30" min="0">
                                    </div>
                                </div>
                            </div>

                            <!-- Shift 3 -->
                            <div class="shift-card">
                                <h5>üåô Turno 3</h5>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="ts-shift3-start">Hora Inicio</label>
                                        <input type="time" id="ts-shift3-start" value="22:00">
                                    </div>
                                    <div class="form-group">
                                        <label for="ts-shift3-end">Hora Fin</label>
                                        <input type="time" id="ts-shift3-end" value="06:00">
                                    </div>
                                    <div class="form-group">
                                        <label for="ts-shift3-break">Descanso (min)</label>
                                        <input type="number" id="ts-shift3-break" value="30" min="0">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4 style="margin-top: 20px; color: var(--text-primary);">üìä Capacidad y Producci√≥n</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="ts-capacity">Cadencia Te√≥rica (pcs/min)*</label>
                                <input type="number" id="ts-capacity" required step="0.01" min="0" placeholder="Ej: 100">
                            </div>
                            <div class="form-group">
                                <label for="ts-actual-production">Producci√≥n Real (pcs)*</label>
                                <input type="number" id="ts-actual-production" required min="0" placeholder="Ej: 25000">
                            </div>
                            <div class="form-group">
                                <label for="ts-defects">Piezas Defectuosas</label>
                                <input type="number" id="ts-defects" value="0" min="0">
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-success">Guardar Planilla</button>
                            <button type="button" class="btn btn-secondary" onclick="hideAddTimesheetForm()">Cancelar</button>
                        </div>
                    </form>
                </div>

                <!-- Timesheet List -->
                <div id="timesheets-list" class="timesheets-list">
                    <!-- Timesheets will be rendered here -->
                </div>

                <!-- Losses/Stops Section -->
                <div id="losses-section" style="display: none;" class="section">
                    <div class="section-header">
                        <h3>üìâ Registro de P√©rdidas - <span id="current-timesheet-title"></span></h3>
                        <div>
                            <button class="btn btn-primary" onclick="showAddLossForm()">+ Registrar P√©rdida</button>
                            <button class="btn btn-secondary" onclick="hideLossesSection()">Volver</button>
                        </div>
                    </div>

                    <!-- Add Loss Form -->
                    <div id="add-loss-form" class="form-container" style="display: none;">
                        <h4>Registrar Nueva P√©rdida</h4>
                        <form onsubmit="addLoss(event)">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="loss-category">Categor√≠a de P√©rdida*</label>
                                    <select id="loss-category" required onchange="updateLossTypes()">
                                        <option value="">Seleccionar...</option>
                                        <option value="disponibilidad">Disponibilidad</option>
                                        <option value="rendimiento">Rendimiento</option>
                                        <option value="calidad">Calidad</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="loss-type">Tipo de P√©rdida*</label>
                                    <select id="loss-type" required>
                                        <option value="">Seleccionar categor√≠a primero...</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="loss-duration">Duraci√≥n (minutos)*</label>
                                    <input type="number" id="loss-duration" required min="1" placeholder="Ej: 45">
                                </div>
                                <div class="form-group">
                                    <label for="loss-shift">Turno</label>
                                    <select id="loss-shift">
                                        <option value="1">Turno 1</option>
                                        <option value="2">Turno 2</option>
                                        <option value="3">Turno 3</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="loss-description">Descripci√≥n / Observaciones</label>
                                <textarea id="loss-description" rows="3" placeholder="Describe los detalles de la p√©rdida..."></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-success">Registrar</button>
                                <button type="button" class="btn btn-secondary" onclick="hideAddLossForm()">Cancelar</button>
                            </div>
                        </form>
                    </div>

                    <!-- Losses List -->
                    <div id="losses-list" class="losses-list">
                        <!-- Losses will be rendered here -->
                    </div>

                    <!-- OEE Metrics -->
                    <div class="oee-metrics-container">
                        <h4>üìä M√©tricas OEE</h4>
                        <div class="oee-metrics-grid">
                            <div class="oee-metric-card">
                                <div class="oee-metric-label">Disponibilidad</div>
                                <div class="oee-metric-value" id="oee-availability">0%</div>
                                <div class="oee-metric-formula">Tiempo Operativo / Tiempo Planificado</div>
                            </div>
                            <div class="oee-metric-card">
                                <div class="oee-metric-label">Rendimiento</div>
                                <div class="oee-metric-value" id="oee-performance">0%</div>
                                <div class="oee-metric-formula">Producci√≥n Real / Producci√≥n Te√≥rica</div>
                            </div>
                            <div class="oee-metric-card">
                                <div class="oee-metric-label">Calidad</div>
                                <div class="oee-metric-value" id="oee-quality">0%</div>
                                <div class="oee-metric-formula">Piezas Buenas / Producci√≥n Total</div>
                            </div>
                            <div class="oee-metric-card oee-final">
                                <div class="oee-metric-label">OEE Final</div>
                                <div class="oee-metric-value oee-final-value" id="oee-final">0%</div>
                                <div class="oee-metric-formula">Disponibilidad √ó Rendimiento √ó Calidad</div>
                            </div>
                        </div>
                    </div>

                    <!-- Pareto Chart -->
                    <div class="pareto-container">
                        <h4>üìâ An√°lisis de Pareto - P√©rdidas</h4>
                        <canvas id="pareto-chart" style="max-height: 300px;"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>&copy; 2026 Barack - Sistema de Gesti√≥n Empresarial</p>
            <p class="footer-note">üí° Sugerencia: Considera Firebase o Supabase para el backend</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
